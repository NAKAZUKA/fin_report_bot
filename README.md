
# Telegram Bot for Financial Disclosure Monitoring (Interfax + MinIO)

## üìå –û–ø–∏—Å–∞–Ω–∏–µ

–î–∞–Ω–Ω—ã–π –ø—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π Telegram-–±–æ—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ –Ω–æ–≤—ã—Ö –æ—Ç—á–µ—Ç–æ–≤ –ø–æ –∑–∞–¥–∞–Ω–Ω—ã–º –∫–æ–º–ø–∞–Ω–∏—è–º —á–µ—Ä–µ–∑ API –ò–Ω—Ç–µ—Ä—Ñ–∞–∫—Å–∞, —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∏—Ö –≤ MinIO-—Ö—Ä–∞–Ω–∏–ª–∏—â–µ, –≤–µ–¥—ë—Ç —É—á—ë—Ç –≤ –ª–æ–∫–∞–ª—å–Ω–æ–π –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ–¥–ø–∏—Å—á–∏–∫–∞–º –≤ Telegram.

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
.
‚îú‚îÄ‚îÄ bot
‚îÇ   ‚îú‚îÄ‚îÄ clients/
‚îÇ   ‚îú‚îÄ‚îÄ config.py
‚îÇ   ‚îú‚îÄ‚îÄ db.py
‚îÇ   ‚îú‚îÄ‚îÄ docker-compose.yml
‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile
‚îÇ   ‚îú‚îÄ‚îÄ handlers/
‚îÇ   ‚îú‚îÄ‚îÄ keyboards/
‚îÇ   ‚îú‚îÄ‚îÄ main.py
‚îÇ   ‚îú‚îÄ‚îÄ pyproject.toml
‚îÇ   ‚îú‚îÄ‚îÄ README.md
‚îÇ   ‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îî‚îÄ‚îÄ utils/
‚îú‚îÄ‚îÄ data/
‚îÇ   ‚îú‚îÄ‚îÄ bot.db
‚îÇ   ‚îú‚îÄ‚îÄ companies.json
‚îÇ   ‚îî‚îÄ‚îÄ interfax_token.json
```

---

## üß∞ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### ‚öôÔ∏è –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.12+
- [uv](https://github.com/astral-sh/uv) ‚Äî –º–µ–Ω–µ–¥–∂–µ—Ä –ø–∞–∫–µ—Ç–æ–≤
- Docker + Docker Compose

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
cd bot/
uv venv
uv pip install -r pyproject.toml
```

---

### üöÄ –ó–∞–ø—É—Å–∫

#### –í–∞—Ä–∏–∞–Ω—Ç 1: –ª–æ–∫–∞–ª—å–Ω–æ

```bash
docker compose up -d minio
cd bot/
uv run python main.py
```

#### –í–∞—Ä–∏–∞–Ω—Ç 2: —á–µ—Ä–µ–∑ Docker

```bash
docker compose up --build -d
```

---

## ‚öôÔ∏è –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–§–∞–π–ª `.env`:

```
BOT_TOKEN=
INTERFAX_LOGIN=
INTERFAX_PASSWORD=
DISPATCH_INTERVAL_MINUTES=15
MINIO_ENDPOINT=localhost:9000
MINIO_ACCESS_KEY=minioadmin
MINIO_SECRET_KEY=minioadmin
MINIO_BUCKET=reports
```

> `.env` –∏ `interfax_token.json` –Ω–µ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –≤ git.

---

## üìÅ –ü–∞–ø–∫–∞ `data/`

–ü—Ä–∏–º–µ—Ä `companies.json`:

```json
{
  "–ü–ê–û \"–ö–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–π –¶–µ–Ω—Ç—Ä –ò–ö–° 5\"": "9722079341",
  "–ú–ö–ü–ê–û \"–¢-–¢–ï–•–ù–û–õ–û–ì–ò–ò\"": "2540283195"
}
```

---

## üì¶ Docker Compose –∫–æ–º–∞–Ω–¥—ã

```bash
docker compose up -d minio
docker compose down
docker compose logs -f minio
```

---

## üß† –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

- FSM-–ø–æ–∏—Å–∫ –ø–æ –∫–æ–º–ø–∞–Ω–∏–∏, –∫–∞—Ç–µ–≥–æ—Ä–∏–∏, –≥–æ–¥—É
- –•—Ä–∞–Ω–µ–Ω–∏–µ –æ—Ç—á—ë—Ç–æ–≤ –≤ MinIO
- –ü–æ–¥–ø–∏—Å–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- SQLite –±–∞–∑–∞: `users`, `reports`, `messages`

---

## üñ• –°–µ—Ä–≤–µ—Ä

–î–æ—Å—Ç—É–ø:

```bash
ssh root@109.172.31.67
```

–†–∞–∑–º–µ—â–µ–Ω–∏–µ: [firstvds.ru](https://my.firstvds.ru)

---

## üîí –ü—Ä–∏–≤–∞—Ç–Ω—ã–µ —Ñ–∞–π–ª—ã

- `.env`
- `data/interfax_token.json`
- `data/bot.db`

---

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –¥–ª—è –¥–æ—Ä–∞–±–æ—Ç–∫–∏

- –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤ (–ø–æ –ø–µ—Ä–∏–æ–¥—É)
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤–ª–æ–∂–µ–Ω–∏–π —Å–æ–æ–±—â–µ–Ω–∏–π
- –•—Ä–∞–Ω–µ–Ω–∏–µ –≤ PostgreSQL
- Web-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞


## üìÅ docker-compose.yml

```yaml
version: "3.8"

services:
  bot:
    build:
      context: ./bot
    container_name: financial-reports-bot
    env_file:
      - ./bot/.env
    volumes:
      - ./data:/app/data
    depends_on:
      - minio
    healthcheck:
      test: ["CMD-SHELL", "pgrep -f main.py || exit 1"]
      interval: 30s
      timeout: 5s
      retries: 3
      start_period: 10s
    restart: unless-stopped

  minio:
    image: minio/minio:latest
    container_name: minio
    ports:
      - "9000:9000"
      - "9001:9001"
    environment:
      MINIO_ROOT_USER: minioadmin
      MINIO_ROOT_PASSWORD: minioadmin
    command: server /data --console-address ":9001"
    volumes:
      - minio_data:/data
    restart: unless-stopped

volumes:
  minio_data:
```